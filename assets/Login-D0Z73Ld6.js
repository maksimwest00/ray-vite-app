import{r as t,a as p,j as e,N as x,L as j,F as f,e as v,E as N}from"./index-0Ts42cdv.js";function y(){const[r,h]=t.useState({email:"",password:"",stayLoggedIn:!1}),[o,i]=t.useState([]),[c,d]=t.useState(null),m=p();t.useEffect(()=>{localStorage.getItem("token")&&m("/dashboard")},[]);const n=l=>{const a=l.target,s=a.type==="checkbox"?a.checked:a.value;h(g=>({...g,[a.name]:s}))},u=l=>{l.preventDefault();let a=[];if(Object.keys(r).forEach(s=>{r[s].length===0&&a.push(s)}),a.length>0){i(a),d("Пожалуйста заполните все обьязательные поля");return}i([]),v.post(`${N.login}`,r).then(s=>{if(s.data.user)localStorage.setItem("token",s.data.user),m("/dashboard");else throw new Error("error")}).catch(s=>{console.log("Error",s),d("Неверно введен email и/или пароль!")})};return e.jsxs("div",{className:"login",children:[e.jsx(x,{showBtn:"signup"}),e.jsxs("div",{className:"signup-container",children:[e.jsx("h3",{children:"Логин"}),(o.length>0||c!==null)&&e.jsx("div",{className:"form-error",children:c}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{htmlFor:"email",children:"Email:"}),e.jsx("input",{id:"email",type:"email",name:"email",className:o.includes("email")?"input-error":"",placeholder:"ivan@yandex.ru",value:r.email,onChange:n})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{htmlFor:"password",children:"Пароль:"}),e.jsx("input",{id:"password",type:"password",name:"password",className:o.includes("password")?"input-error":"",placeholder:"••••••••••",value:r.password,onChange:n})]}),e.jsxs("div",{className:"form-inline-control",children:[e.jsx("input",{id:"stay_logged_in",type:"checkbox",name:"stayLoggedIn",checked:r.stayLoggedIn,onChange:n}),e.jsx("label",{htmlFor:"stay_logged_in",style:{lineHeight:"bottom"},children:"Оставться в системе"})]}),e.jsx("div",{className:"form-inline-control",children:e.jsx(j,{to:"/forget-password",style:{fontSize:14,color:"#ccc"},children:"Забыли пароль?"})}),e.jsx("div",{className:"form-buttons",children:e.jsx("button",{className:"primary-button",type:"submit",children:"Войти"})})]})]}),e.jsx(f,{})]})}export{y as default};
