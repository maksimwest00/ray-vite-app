import{j as t,f as y,r,b,c as S,h as v,e as I,E as k,l as C,N as P,d as B,m as E,L as m,F as L,k as R}from"./index-CmxiHPa1.js";function $({counter:c,handleCounter:n}){return t.jsxs("div",{className:"counter-input",children:[t.jsx("button",{className:"primary-button small-btn",onClick:()=>n("decrement"),children:"-"}),t.jsx("input",{type:"number",className:"input-counter",value:c,disabled:!0}),t.jsx("button",{className:"primary-button small-btn",onClick:()=>n("increment"),children:"+"})]})}function z(){const{id:c}=y(),[n,h]=r.useState(null),[a,p]=r.useState(null),[o,l]=r.useState(1),[g,d]=r.useState(""),u=b(),{products:i,status:T}=S(s=>s.products),[x,j]=r.useState(!1);r.useEffect(()=>{setTimeout(()=>{i.length===0&&u(v()),I.get(`${k.getRecipes}/${c}`,{headers:{authorization:`Bearer ${localStorage.getItem("token")}`}}).then(e=>{p(e.data[0])})},500);const s=localStorage.getItem("token");if(s){const e=C(s);j(e.id!==null)}},[]),r.useEffect(()=>{const s=i.find(e=>e.id===Number(c));if(h(s),s)try{const e=`https://rayhan24.ru/${s.img}`;d(e)}catch{d("#")}},[i]);const f=()=>{u(R({...n,counter:o}))},N=s=>{l(s==="increment"?e=>e+1:e=>e>1?e-1:e)};return t.jsxs("div",{className:"dashboard",children:[t.jsx(P,{showBtn:null}),!n&&t.jsx(B,{}),t.jsx("div",{className:"product-page",children:n&&t.jsxs("div",{className:"product-info",children:[t.jsx("div",{className:"product-title-container",children:t.jsx("h3",{children:n.title})}),t.jsx("div",{className:"product-image-container",children:t.jsx("img",{src:g,alt:n.title})}),t.jsxs("div",{className:"product-ingredients",children:[t.jsx("h4",{children:"Описание"}),a&&t.jsx("p",{children:a.ingredients})]}),t.jsx("div",{className:"product-description",children:t.jsxs("p",{children:["Цена: ",n.price.toLocaleString("ru-RU",{style:"currency",currency:"RUB"})]})}),t.jsx("div",{className:"product-controls",children:x?t.jsxs(t.Fragment,{children:[t.jsx($,{counter:o,handleCounter:s=>N(s)}),t.jsxs("button",{className:"primary-button df",style:{marginTop:30,marginBottom:20,alignItems:"center",width:165},onClick:f,children:[" ",t.jsx(E,{style:{marginRight:10,fontSize:22}})," В корзину"]})]}):t.jsxs("p",{style:{fontSize:16},children:["Пожалуйста ",t.jsx(m,{to:"/login",style:{color:"#36B441"},children:"войдите"})," или ",t.jsx(m,{to:"/signup",style:{color:"#36B441"},children:"зарегистрируйтесь"})," чтобы заказать."]})})]})}),t.jsx(L,{})]})}export{z as default};
